@model IPagedList<HMS.Models.PatientsModel>
@using PagedList;
@using PagedList.Mvc;
@{
    ViewBag.Title = "Index";
}
<br />
@using (Html.BeginForm("IndexAll", "Patient", FormMethod.Get))
{
    @Html.TextBox("search", null, new { placeholder = "Търсене по ЕГН..." })
}
<h2>Списък с пациенти</h2>
@if (Model.Count() == 0)
{

    <div colspan="3" style="color:red; font-size:150%">
        Няма намерини резултати
    </div>

}

@if (Model.Count > 0)
{
    <table class="table">

        @foreach (var item in Model)
        {

            <tr>

                <td>
                    @Html.DisplayFor(modelItem => item.P_first_name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.P_mid_name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.P_family_name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.P_egn)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.P_gender)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.P_phone)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.P_address)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.P_datetime)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.P_blood_group)
                </td>

                <td>
                    @if (Convert.ToString(Session["U_user_level"]) == "Doctor")
                    {
                        <div class="btn btn-default" style="background-color:#F5CC00">
                            @Html.ActionLink("Добавяне", "Edit", new { id = item.Id_p })
                        </div>
                    }
                    @if (Convert.ToString(Session["U_user_level"]) == "Admin")
                    {
                        <div class="btn btn-default" style="background-color:#F5CC00">
                            @Html.ActionLink("Детайли", "Details", new { id = item.Id_p })
                        </div>
                    }


                </td>
            </tr>

        }

    </table>
}
@Html.PagedListPager(Model, i => Url.Action("IndexAll", "Patient", new { i, search = Request.QueryString["search"] }))